<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Concurrent Search Implementation - Business Scraper Documentation</title>
    <link rel="stylesheet" href="styles.css">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css">
    <style>
        .header-link {
            text-decoration: none;
            color: inherit;
        }
        .header-link:hover {
            text-decoration: underline;
        }
        .code-block {
            background-color: #f8f9fa;
            border: 1px solid #e9ecef;
            border-radius: 0.375rem;
            padding: 1rem;
            margin: 1rem 0;
        }
        .table-responsive {
            margin: 1rem 0;
        }
        .nav-breadcrumb {
            background-color: #f8f9fa;
            padding: 0.75rem 1rem;
            border-radius: 0.375rem;
            margin-bottom: 1rem;
        }
        .back-to-docs {
            margin-bottom: 2rem;
        }
        .content-wrapper {
            max-width: 1200px;
            margin: 0 auto;
            padding: 2rem;
        }
        .alert {
            border-radius: 0.375rem;
            padding: 1rem;
            margin: 1rem 0;
        }
        .alert-info {
            background-color: #d1ecf1;
            border-color: #bee5eb;
            color: #0c5460;
        }
        .alert-warning {
            background-color: #fff3cd;
            border-color: #ffecb5;
            color: #664d03;
        }
        .alert-success {
            background-color: #d1e7dd;
            border-color: #badbcc;
            color: #0f5132;
        }
        .alert-danger {
            background-color: #f8d7da;
            border-color: #f5c2c7;
            color: #842029;
        }
    </style>
</head>
<body>
    <div class="content-wrapper">
        <div class="back-to-docs">
            <a href="readme.html" class="btn btn-outline-primary">
                ← Back to Documentation Hub
            </a>
        </div>
        
        <div class="nav-breadcrumb">
            <nav aria-label="breadcrumb">
                <ol class="breadcrumb mb-0">
                    <li class="breadcrumb-item">
                        <a href="readme.html">Documentation</a>
                    </li>
                    <li class="breadcrumb-item active" aria-current="page">Concurrent Search Implementation</li>
                </ol>
            </nav>
        </div>

        <main class="documentation-content">
            <h1>Concurrent Search Implementation</h1>
<h2>Overview</h2>
<p>The SearchOrchestrator now supports concurrent search execution, allowing multiple search providers to run simultaneously instead of sequentially. This provides significant performance improvements while maintaining full compatibility with existing rate limiting and error handling.</p>
<h2>Performance Benefits</h2>
<ul>
<li><strong>3-5x Faster Searches</strong>: Total search time reduced from sum of all providers to maximum time of slowest provider</li>
<li><strong>Better Resource Utilization</strong>: Leverages existing browser pool and concurrent capabilities</li>
<li><strong>Maintained Rate Limiting</strong>: Respects individual provider rate limits and concurrent request limits</li>
</ul>
<h2>Configuration</h2>
<h3>Default Configuration</h3>
<pre><code class="language-typescript">const defaultConfig = {
  enableConcurrentSearches: true,
  maxConcurrentProviders: 6,
  searchTimeout: 120000 // 2 minutes
}
</code></pre>
<h3>Updating Configuration</h3>
<pre><code class="language-typescript">import { searchOrchestrator } from &#39;@/lib/searchProviderAbstraction&#39;

// Enable high-performance mode
searchOrchestrator.updateConfig({
  enableConcurrentSearches: true,
  maxConcurrentProviders: 8,
  searchTimeout: 60000
})

// Enable debug mode (sequential)
searchOrchestrator.updateConfig({
  enableConcurrentSearches: false,
  searchTimeout: 180000
})
</code></pre>
<h2>Usage Examples</h2>
<h3>Basic Concurrent Search</h3>
<pre><code class="language-typescript">import { searchOrchestrator } from &#39;@/lib/searchProviderAbstraction&#39;

const searchOptions = {
  query: &#39;restaurants&#39;,
  location: &#39;New York, NY&#39;,
  maxResults: 50
}

// Concurrent search (default)
const results = await searchOrchestrator.searchBusinesses(searchOptions)
</code></pre>
<h3>Performance Comparison</h3>
<pre><code class="language-typescript">// Measure concurrent performance
const concurrentStart = Date.now()
const concurrentResults = await searchOrchestrator.searchBusinesses(searchOptions)
const concurrentTime = Date.now() - concurrentStart

// Switch to sequential for comparison
searchOrchestrator.updateConfig({ enableConcurrentSearches: false })
const sequentialStart = Date.now()
const sequentialResults = await searchOrchestrator.searchBusinesses(searchOptions)
const sequentialTime = Date.now() - sequentialStart

console.log(`Concurrent: ${concurrentTime}ms, Sequential: ${sequentialTime}ms`)
console.log(`Performance improvement: ${(sequentialTime / concurrentTime).toFixed(1)}x faster`)
</code></pre>
<h2>Rate Limiting Compliance</h2>
<p>The concurrent implementation respects existing rate limiting rules:</p>
<ul>
<li><strong>DuckDuckGo</strong>: 1 concurrent request, 45s min delay</li>
<li><strong>Google</strong>: 2 concurrent requests, 12s min delay  </li>
<li><strong>Bing</strong>: 3 concurrent requests, 6s min delay</li>
<li><strong>BBB</strong>: 1 concurrent request, 20s min delay</li>
<li><strong>Yelp</strong>: 2 concurrent requests, 12s min delay</li>
</ul>
<h2>Error Handling</h2>
<h3>Graceful Degradation</h3>
<pre><code class="language-typescript">// Individual provider failures don&#39;t affect other providers
const results = await searchOrchestrator.searchBusinesses(searchOptions)
// Results will include data from successful providers only
</code></pre>
<h3>Timeout Protection</h3>
<pre><code class="language-typescript">// Configure shorter timeout for faster failure detection
searchOrchestrator.updateConfig({
  searchTimeout: 30000 // 30 seconds
})

// Providers that exceed timeout return empty results
const results = await searchOrchestrator.searchBusinesses(searchOptions)
</code></pre>
<h2>Implementation Details</h2>
<h3>Concurrent Execution Flow</h3>
<ol>
<li><strong>SERP Providers</strong>: Google, Bing, DuckDuckGo execute simultaneously</li>
<li><strong>Business Providers</strong>: BBB, Yelp execute simultaneously  </li>
<li><strong>Parallel Groups</strong>: Both groups run concurrently with each other</li>
<li><strong>Result Aggregation</strong>: All results combined and deduplicated</li>
<li><strong>Error Handling</strong>: Failed providers return empty arrays</li>
</ol>
<h3>Sequential Fallback</h3>
<pre><code class="language-typescript">// For debugging or compatibility
searchOrchestrator.updateConfig({ enableConcurrentSearches: false })

// Providers execute one after another
// Useful for:
// - Debugging individual provider issues
// - Environments with resource constraints
// - Development and testing
</code></pre>
<h2>Monitoring and Logging</h2>
<h3>Performance Metrics</h3>
<pre><code class="language-typescript">// Logs include timing information
// &quot;MockGoogle SERP search completed in 150ms with 5 results&quot;
// &quot;Concurrent search completed: 15 total → 12 unique → 12 final results&quot;
</code></pre>
<h3>Error Tracking</h3>
<pre><code class="language-typescript">// Failed providers are logged with details
// &quot;MockProvider SERP search failed: Error message&quot;
// &quot;MockProvider search timed out after 30000ms&quot;
</code></pre>
<h2>Best Practices</h2>
<h3>Production Configuration</h3>
<pre><code class="language-typescript">// Recommended production settings
searchOrchestrator.updateConfig({
  enableConcurrentSearches: true,
  maxConcurrentProviders: 6,
  searchTimeout: 120000
})
</code></pre>
<h3>Development Configuration</h3>
<pre><code class="language-typescript">// Recommended development settings
searchOrchestrator.updateConfig({
  enableConcurrentSearches: false, // Sequential for easier debugging
  maxConcurrentProviders: 3,
  searchTimeout: 180000
})
</code></pre>
<h3>High-Volume Configuration</h3>
<pre><code class="language-typescript">// For high-volume applications
searchOrchestrator.updateConfig({
  enableConcurrentSearches: true,
  maxConcurrentProviders: 8,
  searchTimeout: 60000
})
</code></pre>
<h2>Migration Guide</h2>
<h3>Existing Code Compatibility</h3>
<p>No changes required for existing code. The concurrent implementation is:</p>
<ul>
<li><strong>Backward Compatible</strong>: Existing code works without modification</li>
<li><strong>Drop-in Replacement</strong>: Same API, better performance</li>
<li><strong>Configurable</strong>: Can be disabled if needed</li>
</ul>
<h3>Testing Considerations</h3>
<pre><code class="language-typescript">// Test both modes in your test suite
describe(&#39;Search functionality&#39;, () =&gt; {
  it(&#39;should work in concurrent mode&#39;, async () =&gt; {
    searchOrchestrator.updateConfig({ enableConcurrentSearches: true })
    // Test concurrent behavior
  })
  
  it(&#39;should work in sequential mode&#39;, async () =&gt; {
    searchOrchestrator.updateConfig({ enableConcurrentSearches: false })
    // Test sequential behavior
  })
})
</code></pre>
<h2>Troubleshooting</h2>
<h3>Common Issues</h3>
<ol>
<li><strong>Timeouts</strong>: Increase <code>searchTimeout</code> if providers are timing out</li>
<li><strong>Rate Limits</strong>: Concurrent execution may hit rate limits faster</li>
<li><strong>Resource Usage</strong>: Monitor browser pool usage with high concurrency</li>
</ol>
<h3>Debug Mode</h3>
<pre><code class="language-typescript">// Enable sequential mode for debugging
searchOrchestrator.updateConfig({
  enableConcurrentSearches: false,
  searchTimeout: 300000 // 5 minutes for debugging
})
</code></pre>
<h2>Future Enhancements</h2>
<ul>
<li>Dynamic concurrency adjustment based on provider performance</li>
<li>Provider-specific timeout configuration</li>
<li>Advanced load balancing and circuit breaker patterns</li>
<li>Real-time performance monitoring and alerting</li>
</ul>

        </main>

        <footer class="text-center mt-5 pt-4 border-top">
            <p class="text-muted">
                <strong>Business Scraper Application v3.0.0</strong> - Enterprise Multi-User Collaboration Platform
            </p>
            <p class="text-muted">
                <a href="readme.html">Documentation Hub</a> | 
                <a href="https://github.com/mytech-today-now/business_scraper">GitHub Repository</a>
            </p>
            <p class="text-muted small">Last updated: 8/24/2025</p>
        </footer>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-core.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/plugins/autoloader/prism-autoloader.min.js"></script>
</body>
</html>