{"timestamp":"2025-10-03T21:31:55.077Z","suite":"Payment-processing","testCase":"should create payment intent with proper validation","error":"TypeError: this.paymentIntents.clear is not a function\n    at StripeServiceMock.clear (Q:\\_kyle\\temp_documents\\GitHub\\business_scraper\\src\\__tests__\\utils\\externalServiceMocks.ts:298:25)\n    at Object.reset (Q:\\_kyle\\temp_documents\\GitHub\\business_scraper\\src\\__tests__\\critical\\payment-processing.test.ts:28:16)\n    at Promise.then.completed (Q:\\_kyle\\temp_documents\\GitHub\\business_scraper\\node_modules\\jest-circus\\build\\utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (Q:\\_kyle\\temp_documents\\GitHub\\business_scraper\\node_modules\\jest-circus\\build\\utils.js:231:10)\n    at _callCircusHook (Q:\\_kyle\\temp_documents\\GitHub\\business_scraper\\node_modules\\jest-circus\\build\\run.js:281:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (Q:\\_kyle\\temp_documents\\GitHub\\business_scraper\\node_modules\\jest-circus\\build\\run.js:246:5)\n    at _runTestsForDescribeBlock (Q:\\_kyle\\temp_documents\\GitHub\\business_scraper\\node_modules\\jest-circus\\build\\run.js:126:9)\n    at _runTestsForDescribeBlock (Q:\\_kyle\\temp_documents\\GitHub\\business_scraper\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at _runTestsForDescribeBlock (Q:\\_kyle\\temp_documents\\GitHub\\business_scraper\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at run (Q:\\_kyle\\temp_documents\\GitHub\\business_scraper\\node_modules\\jest-circus\\build\\run.js:71:3)\n    at runAndTransformResultsToJestFormat (Q:\\_kyle\\temp_documents\\GitHub\\business_scraper\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapterInit.js:122:21)\n    at jestAdapter (Q:\\_kyle\\temp_documents\\GitHub\\business_scraper\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapter.js:79:19)\n    at runTestInternal (Q:\\_kyle\\temp_documents\\GitHub\\business_scraper\\node_modules\\jest-runner\\build\\runTest.js:367:16)\n    at runTest (Q:\\_kyle\\temp_documents\\GitHub\\business_scraper\\node_modules\\jest-runner\\build\\runTest.js:444:34)","metadata":{"file":"Q:\\_kyle\\temp_documents\\GitHub\\business_scraper\\src\\__tests__\\critical\\payment-processing.test.ts","stack":"TypeError: this.paymentIntents.clear is not a function\n    at StripeServiceMock.clear (Q:\\_kyle\\temp_documents\\GitHub\\business_scraper\\src\\__tests__\\utils\\externalServiceMocks.ts:298:25)\n    at Object.reset (Q:\\_kyle\\temp_documents\\GitHub\\business_scraper\\src\\__tests__\\critical\\payment-processing.test.ts:28:16)\n    at Promise.then.completed (Q:\\_kyle\\temp_documents\\GitHub\\business_scraper\\node_modules\\jest-circus\\build\\utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (Q:\\_kyle\\temp_documents\\GitHub\\business_scraper\\node_modules\\jest-circus\\build\\utils.js:231:10)\n    at _callCircusHook (Q:\\_kyle\\temp_documents\\GitHub\\business_scraper\\node_modules\\jest-circus\\build\\run.js:281:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (Q:\\_kyle\\temp_documents\\GitHub\\business_scraper\\node_modules\\jest-circus\\build\\run.js:246:5)\n    at _runTestsForDescribeBlock (Q:\\_kyle\\temp_documents\\GitHub\\business_scraper\\node_modules\\jest-circus\\build\\run.js:126:9)\n    at _runTestsForDescribeBlock (Q:\\_kyle\\temp_documents\\GitHub\\business_scraper\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at _runTestsForDescribeBlock (Q:\\_kyle\\temp_documents\\GitHub\\business_scraper\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at run (Q:\\_kyle\\temp_documents\\GitHub\\business_scraper\\node_modules\\jest-circus\\build\\run.js:71:3)\n    at runAndTransformResultsToJestFormat (Q:\\_kyle\\temp_documents\\GitHub\\business_scraper\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapterInit.js:122:21)\n    at jestAdapter (Q:\\_kyle\\temp_documents\\GitHub\\business_scraper\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapter.js:79:19)\n    at runTestInternal (Q:\\_kyle\\temp_documents\\GitHub\\business_scraper\\node_modules\\jest-runner\\build\\runTest.js:367:16)\n    at runTest (Q:\\_kyle\\temp_documents\\GitHub\\business_scraper\\node_modules\\jest-runner\\build\\runTest.js:444:34)\nTypeError: this.paymentIntents.clear is not a function\n    at StripeServiceMock.clear (Q:\\_kyle\\temp_documents\\GitHub\\business_scraper\\src\\__tests__\\utils\\externalServiceMocks.ts:298:25)\n    at ExternalServiceMockFactory.reset [as resetAllMocks] (Q:\\_kyle\\temp_documents\\GitHub\\business_scraper\\src\\__tests__\\utils\\externalServiceMocks.ts:718:22)\n    at resetAllMocks (Q:\\_kyle\\temp_documents\\GitHub\\business_scraper\\src\\__tests__\\utils\\externalServiceMocks.ts:768:30)\n    at performComprehensiveCleanup (Q:\\_kyle\\temp_documents\\GitHub\\business_scraper\\src\\__tests__\\utils\\mockCleanup.ts:304:30)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at Object.<anonymous> (Q:\\_kyle\\temp_documents\\GitHub\\business_scraper\\src\\__tests__\\utils\\mockCleanup.ts:332:5)\nTypeError: this.paymentIntents.clear is not a function\n    at StripeServiceMock.clear (Q:\\_kyle\\temp_documents\\GitHub\\business_scraper\\src\\__tests__\\utils\\externalServiceMocks.ts:298:25)\n    at ExternalServiceMockFactory.reset [as resetAllMocks] (Q:\\_kyle\\temp_documents\\GitHub\\business_scraper\\src\\__tests__\\utils\\externalServiceMocks.ts:718:22)\n    at resetAllMocks (Q:\\_kyle\\temp_documents\\GitHub\\business_scraper\\src\\__tests__\\utils\\externalServiceMocks.ts:768:30)\n    at performComprehensiveCleanup (Q:\\_kyle\\temp_documents\\GitHub\\business_scraper\\src\\__tests__\\utils\\mockCleanup.ts:304:30)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at Object.<anonymous> (Q:\\_kyle\\temp_documents\\GitHub\\business_scraper\\src\\__tests__\\utils\\mockCleanup.ts:332:5)","category":"functional","severity":"critical","retryCount":0}}
{"timestamp":"2025-10-03T21:31:55.088Z","suite":"Payment-processing","testCase":"should handle payment failures gracefully","error":"TypeError: this.paymentIntents.clear is not a function\n    at StripeServiceMock.clear (Q:\\_kyle\\temp_documents\\GitHub\\business_scraper\\src\\__tests__\\utils\\externalServiceMocks.ts:298:25)\n    at Object.reset (Q:\\_kyle\\temp_documents\\GitHub\\business_scraper\\src\\__tests__\\critical\\payment-processing.test.ts:28:16)\n    at Promise.then.completed (Q:\\_kyle\\temp_documents\\GitHub\\business_scraper\\node_modules\\jest-circus\\build\\utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (Q:\\_kyle\\temp_documents\\GitHub\\business_scraper\\node_modules\\jest-circus\\build\\utils.js:231:10)\n    at _callCircusHook (Q:\\_kyle\\temp_documents\\GitHub\\business_scraper\\node_modules\\jest-circus\\build\\run.js:281:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (Q:\\_kyle\\temp_documents\\GitHub\\business_scraper\\node_modules\\jest-circus\\build\\run.js:246:5)\n    at _runTestsForDescribeBlock (Q:\\_kyle\\temp_documents\\GitHub\\business_scraper\\node_modules\\jest-circus\\build\\run.js:126:9)\n    at _runTestsForDescribeBlock (Q:\\_kyle\\temp_documents\\GitHub\\business_scraper\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at _runTestsForDescribeBlock (Q:\\_kyle\\temp_documents\\GitHub\\business_scraper\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at run (Q:\\_kyle\\temp_documents\\GitHub\\business_scraper\\node_modules\\jest-circus\\build\\run.js:71:3)\n    at runAndTransformResultsToJestFormat (Q:\\_kyle\\temp_documents\\GitHub\\business_scraper\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapterInit.js:122:21)\n    at jestAdapter (Q:\\_kyle\\temp_documents\\GitHub\\business_scraper\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapter.js:79:19)\n    at runTestInternal (Q:\\_kyle\\temp_documents\\GitHub\\business_scraper\\node_modules\\jest-runner\\build\\runTest.js:367:16)\n    at runTest (Q:\\_kyle\\temp_documents\\GitHub\\business_scraper\\node_modules\\jest-runner\\build\\runTest.js:444:34)","metadata":{"file":"Q:\\_kyle\\temp_documents\\GitHub\\business_scraper\\src\\__tests__\\critical\\payment-processing.test.ts","stack":"TypeError: this.paymentIntents.clear is not a function\n    at StripeServiceMock.clear (Q:\\_kyle\\temp_documents\\GitHub\\business_scraper\\src\\__tests__\\utils\\externalServiceMocks.ts:298:25)\n    at Object.reset (Q:\\_kyle\\temp_documents\\GitHub\\business_scraper\\src\\__tests__\\critical\\payment-processing.test.ts:28:16)\n    at Promise.then.completed (Q:\\_kyle\\temp_documents\\GitHub\\business_scraper\\node_modules\\jest-circus\\build\\utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (Q:\\_kyle\\temp_documents\\GitHub\\business_scraper\\node_modules\\jest-circus\\build\\utils.js:231:10)\n    at _callCircusHook (Q:\\_kyle\\temp_documents\\GitHub\\business_scraper\\node_modules\\jest-circus\\build\\run.js:281:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (Q:\\_kyle\\temp_documents\\GitHub\\business_scraper\\node_modules\\jest-circus\\build\\run.js:246:5)\n    at _runTestsForDescribeBlock (Q:\\_kyle\\temp_documents\\GitHub\\business_scraper\\node_modules\\jest-circus\\build\\run.js:126:9)\n    at _runTestsForDescribeBlock (Q:\\_kyle\\temp_documents\\GitHub\\business_scraper\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at _runTestsForDescribeBlock (Q:\\_kyle\\temp_documents\\GitHub\\business_scraper\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at run (Q:\\_kyle\\temp_documents\\GitHub\\business_scraper\\node_modules\\jest-circus\\build\\run.js:71:3)\n    at runAndTransformResultsToJestFormat (Q:\\_kyle\\temp_documents\\GitHub\\business_scraper\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapterInit.js:122:21)\n    at jestAdapter (Q:\\_kyle\\temp_documents\\GitHub\\business_scraper\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapter.js:79:19)\n    at runTestInternal (Q:\\_kyle\\temp_documents\\GitHub\\business_scraper\\node_modules\\jest-runner\\build\\runTest.js:367:16)\n    at runTest (Q:\\_kyle\\temp_documents\\GitHub\\business_scraper\\node_modules\\jest-runner\\build\\runTest.js:444:34)\nTypeError: this.paymentIntents.clear is not a function\n    at StripeServiceMock.clear (Q:\\_kyle\\temp_documents\\GitHub\\business_scraper\\src\\__tests__\\utils\\externalServiceMocks.ts:298:25)\n    at ExternalServiceMockFactory.reset [as resetAllMocks] (Q:\\_kyle\\temp_documents\\GitHub\\business_scraper\\src\\__tests__\\utils\\externalServiceMocks.ts:718:22)\n    at resetAllMocks (Q:\\_kyle\\temp_documents\\GitHub\\business_scraper\\src\\__tests__\\utils\\externalServiceMocks.ts:768:30)\n    at performComprehensiveCleanup (Q:\\_kyle\\temp_documents\\GitHub\\business_scraper\\src\\__tests__\\utils\\mockCleanup.ts:304:30)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at Object.<anonymous> (Q:\\_kyle\\temp_documents\\GitHub\\business_scraper\\src\\__tests__\\utils\\mockCleanup.ts:332:5)\nTypeError: this.paymentIntents.clear is not a function\n    at StripeServiceMock.clear (Q:\\_kyle\\temp_documents\\GitHub\\business_scraper\\src\\__tests__\\utils\\externalServiceMocks.ts:298:25)\n    at ExternalServiceMockFactory.reset [as resetAllMocks] (Q:\\_kyle\\temp_documents\\GitHub\\business_scraper\\src\\__tests__\\utils\\externalServiceMocks.ts:718:22)\n    at resetAllMocks (Q:\\_kyle\\temp_documents\\GitHub\\business_scraper\\src\\__tests__\\utils\\externalServiceMocks.ts:768:30)\n    at performComprehensiveCleanup (Q:\\_kyle\\temp_documents\\GitHub\\business_scraper\\src\\__tests__\\utils\\mockCleanup.ts:304:30)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at Object.<anonymous> (Q:\\_kyle\\temp_documents\\GitHub\\business_scraper\\src\\__tests__\\utils\\mockCleanup.ts:332:5)","category":"functional","severity":"critical","retryCount":0}}
{"timestamp":"2025-10-03T21:31:55.097Z","suite":"Payment-processing","testCase":"should validate webhook signatures","error":"TypeError: this.paymentIntents.clear is not a function\n    at StripeServiceMock.clear (Q:\\_kyle\\temp_documents\\GitHub\\business_scraper\\src\\__tests__\\utils\\externalServiceMocks.ts:298:25)\n    at Object.reset (Q:\\_kyle\\temp_documents\\GitHub\\business_scraper\\src\\__tests__\\critical\\payment-processing.test.ts:28:16)\n    at Promise.then.completed (Q:\\_kyle\\temp_documents\\GitHub\\business_scraper\\node_modules\\jest-circus\\build\\utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (Q:\\_kyle\\temp_documents\\GitHub\\business_scraper\\node_modules\\jest-circus\\build\\utils.js:231:10)\n    at _callCircusHook (Q:\\_kyle\\temp_documents\\GitHub\\business_scraper\\node_modules\\jest-circus\\build\\run.js:281:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (Q:\\_kyle\\temp_documents\\GitHub\\business_scraper\\node_modules\\jest-circus\\build\\run.js:246:5)\n    at _runTestsForDescribeBlock (Q:\\_kyle\\temp_documents\\GitHub\\business_scraper\\node_modules\\jest-circus\\build\\run.js:126:9)\n    at _runTestsForDescribeBlock (Q:\\_kyle\\temp_documents\\GitHub\\business_scraper\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at _runTestsForDescribeBlock (Q:\\_kyle\\temp_documents\\GitHub\\business_scraper\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at run (Q:\\_kyle\\temp_documents\\GitHub\\business_scraper\\node_modules\\jest-circus\\build\\run.js:71:3)\n    at runAndTransformResultsToJestFormat (Q:\\_kyle\\temp_documents\\GitHub\\business_scraper\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapterInit.js:122:21)\n    at jestAdapter (Q:\\_kyle\\temp_documents\\GitHub\\business_scraper\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapter.js:79:19)\n    at runTestInternal (Q:\\_kyle\\temp_documents\\GitHub\\business_scraper\\node_modules\\jest-runner\\build\\runTest.js:367:16)\n    at runTest (Q:\\_kyle\\temp_documents\\GitHub\\business_scraper\\node_modules\\jest-runner\\build\\runTest.js:444:34)","metadata":{"file":"Q:\\_kyle\\temp_documents\\GitHub\\business_scraper\\src\\__tests__\\critical\\payment-processing.test.ts","stack":"TypeError: this.paymentIntents.clear is not a function\n    at StripeServiceMock.clear (Q:\\_kyle\\temp_documents\\GitHub\\business_scraper\\src\\__tests__\\utils\\externalServiceMocks.ts:298:25)\n    at Object.reset (Q:\\_kyle\\temp_documents\\GitHub\\business_scraper\\src\\__tests__\\critical\\payment-processing.test.ts:28:16)\n    at Promise.then.completed (Q:\\_kyle\\temp_documents\\GitHub\\business_scraper\\node_modules\\jest-circus\\build\\utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (Q:\\_kyle\\temp_documents\\GitHub\\business_scraper\\node_modules\\jest-circus\\build\\utils.js:231:10)\n    at _callCircusHook (Q:\\_kyle\\temp_documents\\GitHub\\business_scraper\\node_modules\\jest-circus\\build\\run.js:281:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (Q:\\_kyle\\temp_documents\\GitHub\\business_scraper\\node_modules\\jest-circus\\build\\run.js:246:5)\n    at _runTestsForDescribeBlock (Q:\\_kyle\\temp_documents\\GitHub\\business_scraper\\node_modules\\jest-circus\\build\\run.js:126:9)\n    at _runTestsForDescribeBlock (Q:\\_kyle\\temp_documents\\GitHub\\business_scraper\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at _runTestsForDescribeBlock (Q:\\_kyle\\temp_documents\\GitHub\\business_scraper\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at run (Q:\\_kyle\\temp_documents\\GitHub\\business_scraper\\node_modules\\jest-circus\\build\\run.js:71:3)\n    at runAndTransformResultsToJestFormat (Q:\\_kyle\\temp_documents\\GitHub\\business_scraper\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapterInit.js:122:21)\n    at jestAdapter (Q:\\_kyle\\temp_documents\\GitHub\\business_scraper\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapter.js:79:19)\n    at runTestInternal (Q:\\_kyle\\temp_documents\\GitHub\\business_scraper\\node_modules\\jest-runner\\build\\runTest.js:367:16)\n    at runTest (Q:\\_kyle\\temp_documents\\GitHub\\business_scraper\\node_modules\\jest-runner\\build\\runTest.js:444:34)\nTypeError: this.paymentIntents.clear is not a function\n    at StripeServiceMock.clear (Q:\\_kyle\\temp_documents\\GitHub\\business_scraper\\src\\__tests__\\utils\\externalServiceMocks.ts:298:25)\n    at ExternalServiceMockFactory.reset [as resetAllMocks] (Q:\\_kyle\\temp_documents\\GitHub\\business_scraper\\src\\__tests__\\utils\\externalServiceMocks.ts:718:22)\n    at resetAllMocks (Q:\\_kyle\\temp_documents\\GitHub\\business_scraper\\src\\__tests__\\utils\\externalServiceMocks.ts:768:30)\n    at performComprehensiveCleanup (Q:\\_kyle\\temp_documents\\GitHub\\business_scraper\\src\\__tests__\\utils\\mockCleanup.ts:304:30)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at Object.<anonymous> (Q:\\_kyle\\temp_documents\\GitHub\\business_scraper\\src\\__tests__\\utils\\mockCleanup.ts:332:5)\nTypeError: this.paymentIntents.clear is not a function\n    at StripeServiceMock.clear (Q:\\_kyle\\temp_documents\\GitHub\\business_scraper\\src\\__tests__\\utils\\externalServiceMocks.ts:298:25)\n    at ExternalServiceMockFactory.reset [as resetAllMocks] (Q:\\_kyle\\temp_documents\\GitHub\\business_scraper\\src\\__tests__\\utils\\externalServiceMocks.ts:718:22)\n    at resetAllMocks (Q:\\_kyle\\temp_documents\\GitHub\\business_scraper\\src\\__tests__\\utils\\externalServiceMocks.ts:768:30)\n    at performComprehensiveCleanup (Q:\\_kyle\\temp_documents\\GitHub\\business_scraper\\src\\__tests__\\utils\\mockCleanup.ts:304:30)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at Object.<anonymous> (Q:\\_kyle\\temp_documents\\GitHub\\business_scraper\\src\\__tests__\\utils\\mockCleanup.ts:332:5)","category":"functional","severity":"critical","retryCount":0}}
{"timestamp":"2025-10-03T21:31:55.104Z","suite":"Payment-processing","testCase":"should process webhook events correctly","error":"TypeError: this.paymentIntents.clear is not a function\n    at StripeServiceMock.clear (Q:\\_kyle\\temp_documents\\GitHub\\business_scraper\\src\\__tests__\\utils\\externalServiceMocks.ts:298:25)\n    at Object.reset (Q:\\_kyle\\temp_documents\\GitHub\\business_scraper\\src\\__tests__\\critical\\payment-processing.test.ts:28:16)\n    at Promise.then.completed (Q:\\_kyle\\temp_documents\\GitHub\\business_scraper\\node_modules\\jest-circus\\build\\utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (Q:\\_kyle\\temp_documents\\GitHub\\business_scraper\\node_modules\\jest-circus\\build\\utils.js:231:10)\n    at _callCircusHook (Q:\\_kyle\\temp_documents\\GitHub\\business_scraper\\node_modules\\jest-circus\\build\\run.js:281:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (Q:\\_kyle\\temp_documents\\GitHub\\business_scraper\\node_modules\\jest-circus\\build\\run.js:246:5)\n    at _runTestsForDescribeBlock (Q:\\_kyle\\temp_documents\\GitHub\\business_scraper\\node_modules\\jest-circus\\build\\run.js:126:9)\n    at _runTestsForDescribeBlock (Q:\\_kyle\\temp_documents\\GitHub\\business_scraper\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at _runTestsForDescribeBlock (Q:\\_kyle\\temp_documents\\GitHub\\business_scraper\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at run (Q:\\_kyle\\temp_documents\\GitHub\\business_scraper\\node_modules\\jest-circus\\build\\run.js:71:3)\n    at runAndTransformResultsToJestFormat (Q:\\_kyle\\temp_documents\\GitHub\\business_scraper\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapterInit.js:122:21)\n    at jestAdapter (Q:\\_kyle\\temp_documents\\GitHub\\business_scraper\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapter.js:79:19)\n    at runTestInternal (Q:\\_kyle\\temp_documents\\GitHub\\business_scraper\\node_modules\\jest-runner\\build\\runTest.js:367:16)\n    at runTest (Q:\\_kyle\\temp_documents\\GitHub\\business_scraper\\node_modules\\jest-runner\\build\\runTest.js:444:34)","metadata":{"file":"Q:\\_kyle\\temp_documents\\GitHub\\business_scraper\\src\\__tests__\\critical\\payment-processing.test.ts","stack":"TypeError: this.paymentIntents.clear is not a function\n    at StripeServiceMock.clear (Q:\\_kyle\\temp_documents\\GitHub\\business_scraper\\src\\__tests__\\utils\\externalServiceMocks.ts:298:25)\n    at Object.reset (Q:\\_kyle\\temp_documents\\GitHub\\business_scraper\\src\\__tests__\\critical\\payment-processing.test.ts:28:16)\n    at Promise.then.completed (Q:\\_kyle\\temp_documents\\GitHub\\business_scraper\\node_modules\\jest-circus\\build\\utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (Q:\\_kyle\\temp_documents\\GitHub\\business_scraper\\node_modules\\jest-circus\\build\\utils.js:231:10)\n    at _callCircusHook (Q:\\_kyle\\temp_documents\\GitHub\\business_scraper\\node_modules\\jest-circus\\build\\run.js:281:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (Q:\\_kyle\\temp_documents\\GitHub\\business_scraper\\node_modules\\jest-circus\\build\\run.js:246:5)\n    at _runTestsForDescribeBlock (Q:\\_kyle\\temp_documents\\GitHub\\business_scraper\\node_modules\\jest-circus\\build\\run.js:126:9)\n    at _runTestsForDescribeBlock (Q:\\_kyle\\temp_documents\\GitHub\\business_scraper\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at _runTestsForDescribeBlock (Q:\\_kyle\\temp_documents\\GitHub\\business_scraper\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at run (Q:\\_kyle\\temp_documents\\GitHub\\business_scraper\\node_modules\\jest-circus\\build\\run.js:71:3)\n    at runAndTransformResultsToJestFormat (Q:\\_kyle\\temp_documents\\GitHub\\business_scraper\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapterInit.js:122:21)\n    at jestAdapter (Q:\\_kyle\\temp_documents\\GitHub\\business_scraper\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapter.js:79:19)\n    at runTestInternal (Q:\\_kyle\\temp_documents\\GitHub\\business_scraper\\node_modules\\jest-runner\\build\\runTest.js:367:16)\n    at runTest (Q:\\_kyle\\temp_documents\\GitHub\\business_scraper\\node_modules\\jest-runner\\build\\runTest.js:444:34)\nTypeError: this.paymentIntents.clear is not a function\n    at StripeServiceMock.clear (Q:\\_kyle\\temp_documents\\GitHub\\business_scraper\\src\\__tests__\\utils\\externalServiceMocks.ts:298:25)\n    at ExternalServiceMockFactory.reset [as resetAllMocks] (Q:\\_kyle\\temp_documents\\GitHub\\business_scraper\\src\\__tests__\\utils\\externalServiceMocks.ts:718:22)\n    at resetAllMocks (Q:\\_kyle\\temp_documents\\GitHub\\business_scraper\\src\\__tests__\\utils\\externalServiceMocks.ts:768:30)\n    at performComprehensiveCleanup (Q:\\_kyle\\temp_documents\\GitHub\\business_scraper\\src\\__tests__\\utils\\mockCleanup.ts:304:30)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at Object.<anonymous> (Q:\\_kyle\\temp_documents\\GitHub\\business_scraper\\src\\__tests__\\utils\\mockCleanup.ts:332:5)\nTypeError: this.paymentIntents.clear is not a function\n    at StripeServiceMock.clear (Q:\\_kyle\\temp_documents\\GitHub\\business_scraper\\src\\__tests__\\utils\\externalServiceMocks.ts:298:25)\n    at ExternalServiceMockFactory.reset [as resetAllMocks] (Q:\\_kyle\\temp_documents\\GitHub\\business_scraper\\src\\__tests__\\utils\\externalServiceMocks.ts:718:22)\n    at resetAllMocks (Q:\\_kyle\\temp_documents\\GitHub\\business_scraper\\src\\__tests__\\utils\\externalServiceMocks.ts:768:30)\n    at performComprehensiveCleanup (Q:\\_kyle\\temp_documents\\GitHub\\business_scraper\\src\\__tests__\\utils\\mockCleanup.ts:304:30)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at Object.<anonymous> (Q:\\_kyle\\temp_documents\\GitHub\\business_scraper\\src\\__tests__\\utils\\mockCleanup.ts:332:5)","category":"functional","severity":"critical","retryCount":0}}
{"timestamp":"2025-10-03T21:31:55.114Z","suite":"Payment-processing","testCase":"should sanitize payment data","error":"TypeError: this.paymentIntents.clear is not a function\n    at StripeServiceMock.clear (Q:\\_kyle\\temp_documents\\GitHub\\business_scraper\\src\\__tests__\\utils\\externalServiceMocks.ts:298:25)\n    at Object.reset (Q:\\_kyle\\temp_documents\\GitHub\\business_scraper\\src\\__tests__\\critical\\payment-processing.test.ts:28:16)\n    at Promise.then.completed (Q:\\_kyle\\temp_documents\\GitHub\\business_scraper\\node_modules\\jest-circus\\build\\utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (Q:\\_kyle\\temp_documents\\GitHub\\business_scraper\\node_modules\\jest-circus\\build\\utils.js:231:10)\n    at _callCircusHook (Q:\\_kyle\\temp_documents\\GitHub\\business_scraper\\node_modules\\jest-circus\\build\\run.js:281:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (Q:\\_kyle\\temp_documents\\GitHub\\business_scraper\\node_modules\\jest-circus\\build\\run.js:246:5)\n    at _runTestsForDescribeBlock (Q:\\_kyle\\temp_documents\\GitHub\\business_scraper\\node_modules\\jest-circus\\build\\run.js:126:9)\n    at _runTestsForDescribeBlock (Q:\\_kyle\\temp_documents\\GitHub\\business_scraper\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at _runTestsForDescribeBlock (Q:\\_kyle\\temp_documents\\GitHub\\business_scraper\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at run (Q:\\_kyle\\temp_documents\\GitHub\\business_scraper\\node_modules\\jest-circus\\build\\run.js:71:3)\n    at runAndTransformResultsToJestFormat (Q:\\_kyle\\temp_documents\\GitHub\\business_scraper\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapterInit.js:122:21)\n    at jestAdapter (Q:\\_kyle\\temp_documents\\GitHub\\business_scraper\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapter.js:79:19)\n    at runTestInternal (Q:\\_kyle\\temp_documents\\GitHub\\business_scraper\\node_modules\\jest-runner\\build\\runTest.js:367:16)\n    at runTest (Q:\\_kyle\\temp_documents\\GitHub\\business_scraper\\node_modules\\jest-runner\\build\\runTest.js:444:34)","metadata":{"file":"Q:\\_kyle\\temp_documents\\GitHub\\business_scraper\\src\\__tests__\\critical\\payment-processing.test.ts","stack":"TypeError: this.paymentIntents.clear is not a function\n    at StripeServiceMock.clear (Q:\\_kyle\\temp_documents\\GitHub\\business_scraper\\src\\__tests__\\utils\\externalServiceMocks.ts:298:25)\n    at Object.reset (Q:\\_kyle\\temp_documents\\GitHub\\business_scraper\\src\\__tests__\\critical\\payment-processing.test.ts:28:16)\n    at Promise.then.completed (Q:\\_kyle\\temp_documents\\GitHub\\business_scraper\\node_modules\\jest-circus\\build\\utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (Q:\\_kyle\\temp_documents\\GitHub\\business_scraper\\node_modules\\jest-circus\\build\\utils.js:231:10)\n    at _callCircusHook (Q:\\_kyle\\temp_documents\\GitHub\\business_scraper\\node_modules\\jest-circus\\build\\run.js:281:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (Q:\\_kyle\\temp_documents\\GitHub\\business_scraper\\node_modules\\jest-circus\\build\\run.js:246:5)\n    at _runTestsForDescribeBlock (Q:\\_kyle\\temp_documents\\GitHub\\business_scraper\\node_modules\\jest-circus\\build\\run.js:126:9)\n    at _runTestsForDescribeBlock (Q:\\_kyle\\temp_documents\\GitHub\\business_scraper\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at _runTestsForDescribeBlock (Q:\\_kyle\\temp_documents\\GitHub\\business_scraper\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at run (Q:\\_kyle\\temp_documents\\GitHub\\business_scraper\\node_modules\\jest-circus\\build\\run.js:71:3)\n    at runAndTransformResultsToJestFormat (Q:\\_kyle\\temp_documents\\GitHub\\business_scraper\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapterInit.js:122:21)\n    at jestAdapter (Q:\\_kyle\\temp_documents\\GitHub\\business_scraper\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapter.js:79:19)\n    at runTestInternal (Q:\\_kyle\\temp_documents\\GitHub\\business_scraper\\node_modules\\jest-runner\\build\\runTest.js:367:16)\n    at runTest (Q:\\_kyle\\temp_documents\\GitHub\\business_scraper\\node_modules\\jest-runner\\build\\runTest.js:444:34)\nTypeError: this.paymentIntents.clear is not a function\n    at StripeServiceMock.clear (Q:\\_kyle\\temp_documents\\GitHub\\business_scraper\\src\\__tests__\\utils\\externalServiceMocks.ts:298:25)\n    at ExternalServiceMockFactory.reset [as resetAllMocks] (Q:\\_kyle\\temp_documents\\GitHub\\business_scraper\\src\\__tests__\\utils\\externalServiceMocks.ts:718:22)\n    at resetAllMocks (Q:\\_kyle\\temp_documents\\GitHub\\business_scraper\\src\\__tests__\\utils\\externalServiceMocks.ts:768:30)\n    at performComprehensiveCleanup (Q:\\_kyle\\temp_documents\\GitHub\\business_scraper\\src\\__tests__\\utils\\mockCleanup.ts:304:30)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at Object.<anonymous> (Q:\\_kyle\\temp_documents\\GitHub\\business_scraper\\src\\__tests__\\utils\\mockCleanup.ts:332:5)\nTypeError: this.paymentIntents.clear is not a function\n    at StripeServiceMock.clear (Q:\\_kyle\\temp_documents\\GitHub\\business_scraper\\src\\__tests__\\utils\\externalServiceMocks.ts:298:25)\n    at ExternalServiceMockFactory.reset [as resetAllMocks] (Q:\\_kyle\\temp_documents\\GitHub\\business_scraper\\src\\__tests__\\utils\\externalServiceMocks.ts:718:22)\n    at resetAllMocks (Q:\\_kyle\\temp_documents\\GitHub\\business_scraper\\src\\__tests__\\utils\\externalServiceMocks.ts:768:30)\n    at performComprehensiveCleanup (Q:\\_kyle\\temp_documents\\GitHub\\business_scraper\\src\\__tests__\\utils\\mockCleanup.ts:304:30)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at Object.<anonymous> (Q:\\_kyle\\temp_documents\\GitHub\\business_scraper\\src\\__tests__\\utils\\mockCleanup.ts:332:5)","category":"functional","severity":"critical","retryCount":0}}
{"timestamp":"2025-10-03T21:31:55.124Z","suite":"Payment-processing","testCase":"should enforce rate limiting on payment endpoints","error":"TypeError: this.paymentIntents.clear is not a function\n    at StripeServiceMock.clear (Q:\\_kyle\\temp_documents\\GitHub\\business_scraper\\src\\__tests__\\utils\\externalServiceMocks.ts:298:25)\n    at Object.reset (Q:\\_kyle\\temp_documents\\GitHub\\business_scraper\\src\\__tests__\\critical\\payment-processing.test.ts:28:16)\n    at Promise.then.completed (Q:\\_kyle\\temp_documents\\GitHub\\business_scraper\\node_modules\\jest-circus\\build\\utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (Q:\\_kyle\\temp_documents\\GitHub\\business_scraper\\node_modules\\jest-circus\\build\\utils.js:231:10)\n    at _callCircusHook (Q:\\_kyle\\temp_documents\\GitHub\\business_scraper\\node_modules\\jest-circus\\build\\run.js:281:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (Q:\\_kyle\\temp_documents\\GitHub\\business_scraper\\node_modules\\jest-circus\\build\\run.js:246:5)\n    at _runTestsForDescribeBlock (Q:\\_kyle\\temp_documents\\GitHub\\business_scraper\\node_modules\\jest-circus\\build\\run.js:126:9)\n    at _runTestsForDescribeBlock (Q:\\_kyle\\temp_documents\\GitHub\\business_scraper\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at _runTestsForDescribeBlock (Q:\\_kyle\\temp_documents\\GitHub\\business_scraper\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at run (Q:\\_kyle\\temp_documents\\GitHub\\business_scraper\\node_modules\\jest-circus\\build\\run.js:71:3)\n    at runAndTransformResultsToJestFormat (Q:\\_kyle\\temp_documents\\GitHub\\business_scraper\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapterInit.js:122:21)\n    at jestAdapter (Q:\\_kyle\\temp_documents\\GitHub\\business_scraper\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapter.js:79:19)\n    at runTestInternal (Q:\\_kyle\\temp_documents\\GitHub\\business_scraper\\node_modules\\jest-runner\\build\\runTest.js:367:16)\n    at runTest (Q:\\_kyle\\temp_documents\\GitHub\\business_scraper\\node_modules\\jest-runner\\build\\runTest.js:444:34)","metadata":{"file":"Q:\\_kyle\\temp_documents\\GitHub\\business_scraper\\src\\__tests__\\critical\\payment-processing.test.ts","stack":"TypeError: this.paymentIntents.clear is not a function\n    at StripeServiceMock.clear (Q:\\_kyle\\temp_documents\\GitHub\\business_scraper\\src\\__tests__\\utils\\externalServiceMocks.ts:298:25)\n    at Object.reset (Q:\\_kyle\\temp_documents\\GitHub\\business_scraper\\src\\__tests__\\critical\\payment-processing.test.ts:28:16)\n    at Promise.then.completed (Q:\\_kyle\\temp_documents\\GitHub\\business_scraper\\node_modules\\jest-circus\\build\\utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (Q:\\_kyle\\temp_documents\\GitHub\\business_scraper\\node_modules\\jest-circus\\build\\utils.js:231:10)\n    at _callCircusHook (Q:\\_kyle\\temp_documents\\GitHub\\business_scraper\\node_modules\\jest-circus\\build\\run.js:281:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (Q:\\_kyle\\temp_documents\\GitHub\\business_scraper\\node_modules\\jest-circus\\build\\run.js:246:5)\n    at _runTestsForDescribeBlock (Q:\\_kyle\\temp_documents\\GitHub\\business_scraper\\node_modules\\jest-circus\\build\\run.js:126:9)\n    at _runTestsForDescribeBlock (Q:\\_kyle\\temp_documents\\GitHub\\business_scraper\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at _runTestsForDescribeBlock (Q:\\_kyle\\temp_documents\\GitHub\\business_scraper\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at run (Q:\\_kyle\\temp_documents\\GitHub\\business_scraper\\node_modules\\jest-circus\\build\\run.js:71:3)\n    at runAndTransformResultsToJestFormat (Q:\\_kyle\\temp_documents\\GitHub\\business_scraper\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapterInit.js:122:21)\n    at jestAdapter (Q:\\_kyle\\temp_documents\\GitHub\\business_scraper\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapter.js:79:19)\n    at runTestInternal (Q:\\_kyle\\temp_documents\\GitHub\\business_scraper\\node_modules\\jest-runner\\build\\runTest.js:367:16)\n    at runTest (Q:\\_kyle\\temp_documents\\GitHub\\business_scraper\\node_modules\\jest-runner\\build\\runTest.js:444:34)\nTypeError: this.paymentIntents.clear is not a function\n    at StripeServiceMock.clear (Q:\\_kyle\\temp_documents\\GitHub\\business_scraper\\src\\__tests__\\utils\\externalServiceMocks.ts:298:25)\n    at ExternalServiceMockFactory.reset [as resetAllMocks] (Q:\\_kyle\\temp_documents\\GitHub\\business_scraper\\src\\__tests__\\utils\\externalServiceMocks.ts:718:22)\n    at resetAllMocks (Q:\\_kyle\\temp_documents\\GitHub\\business_scraper\\src\\__tests__\\utils\\externalServiceMocks.ts:768:30)\n    at performComprehensiveCleanup (Q:\\_kyle\\temp_documents\\GitHub\\business_scraper\\src\\__tests__\\utils\\mockCleanup.ts:304:30)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at Object.<anonymous> (Q:\\_kyle\\temp_documents\\GitHub\\business_scraper\\src\\__tests__\\utils\\mockCleanup.ts:332:5)\nTypeError: this.paymentIntents.clear is not a function\n    at StripeServiceMock.clear (Q:\\_kyle\\temp_documents\\GitHub\\business_scraper\\src\\__tests__\\utils\\externalServiceMocks.ts:298:25)\n    at ExternalServiceMockFactory.reset [as resetAllMocks] (Q:\\_kyle\\temp_documents\\GitHub\\business_scraper\\src\\__tests__\\utils\\externalServiceMocks.ts:718:22)\n    at resetAllMocks (Q:\\_kyle\\temp_documents\\GitHub\\business_scraper\\src\\__tests__\\utils\\externalServiceMocks.ts:768:30)\n    at performComprehensiveCleanup (Q:\\_kyle\\temp_documents\\GitHub\\business_scraper\\src\\__tests__\\utils\\mockCleanup.ts:304:30)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at Object.<anonymous> (Q:\\_kyle\\temp_documents\\GitHub\\business_scraper\\src\\__tests__\\utils\\mockCleanup.ts:332:5)","category":"functional","severity":"critical","retryCount":0}}
