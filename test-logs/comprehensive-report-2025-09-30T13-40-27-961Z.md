# Comprehensive Test Report

## Executive Summary
- **Overall Status**: FAILED
- **Total Tests**: 9
- **Success Rate**: 0.00%
- **Critical Issues**: 9
- **Quality Gate**: FAILED

## Test Results
### Failed Tests
- **should fetch token from /api/csrf first**: TypeError: Cannot assign to read only property 'performance' of object '[object Window]'
    at hijackMethod (Q:\_kyle\temp_documents\GitHub\business_scraper\node_modules\@sinonjs\fake-timers\src\fake-timers-src.js:945:32)
    at Object.install (Q:\_kyle\temp_documents\GitHub\business_scraper\node_modules\@sinonjs\fake-timers\src\fake-timers-src.js:1754:17)
    at FakeTimers.useFakeTimers (Q:\_kyle\temp_documents\GitHub\business_scraper\node_modules\@jest\fake-timers\build\modernFakeTimers.js:118:36)
    at Object.useFakeTimers (Q:\_kyle\temp_documents\GitHub\business_scraper\node_modules\jest-runtime\build\index.js:1980:38)
    at Object.useFakeTimers (Q:\_kyle\temp_documents\GitHub\business_scraper\src\__tests__\hooks\useCSRFProtection.test.tsx:28:10)
    at Promise.then.completed (Q:\_kyle\temp_documents\GitHub\business_scraper\node_modules\jest-circus\build\utils.js:298:28)
    at new Promise (<anonymous>)
    at callAsyncCircusFn (Q:\_kyle\temp_documents\GitHub\business_scraper\node_modules\jest-circus\build\utils.js:231:10)
    at _callCircusHook (Q:\_kyle\temp_documents\GitHub\business_scraper\node_modules\jest-circus\build\run.js:281:40)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)
    at _runTest (Q:\_kyle\temp_documents\GitHub\business_scraper\node_modules\jest-circus\build\run.js:246:5)
    at _runTestsForDescribeBlock (Q:\_kyle\temp_documents\GitHub\business_scraper\node_modules\jest-circus\build\run.js:126:9)
    at _runTestsForDescribeBlock (Q:\_kyle\temp_documents\GitHub\business_scraper\node_modules\jest-circus\build\run.js:121:9)
    at _runTestsForDescribeBlock (Q:\_kyle\temp_documents\GitHub\business_scraper\node_modules\jest-circus\build\run.js:121:9)
    at run (Q:\_kyle\temp_documents\GitHub\business_scraper\node_modules\jest-circus\build\run.js:71:3)
    at runAndTransformResultsToJestFormat (Q:\_kyle\temp_documents\GitHub\business_scraper\node_modules\jest-circus\build\legacy-code-todo-rewrite\jestAdapterInit.js:122:21)
    at jestAdapter (Q:\_kyle\temp_documents\GitHub\business_scraper\node_modules\jest-circus\build\legacy-code-todo-rewrite\jestAdapter.js:79:19)
    at runTestInternal (Q:\_kyle\temp_documents\GitHub\business_scraper\node_modules\jest-runner\build\runTest.js:367:16)
    at runTest (Q:\_kyle\temp_documents\GitHub\business_scraper\node_modules\jest-runner\build\runTest.js:444:34)
- **should fallback to /api/auth when /api/csrf fails**: TypeError: Can't install fake timers twice on the same global object.
    at Object.install (Q:\_kyle\temp_documents\GitHub\business_scraper\node_modules\@sinonjs\fake-timers\src\fake-timers-src.js:1663:19)
    at FakeTimers.useFakeTimers (Q:\_kyle\temp_documents\GitHub\business_scraper\node_modules\@jest\fake-timers\build\modernFakeTimers.js:118:36)
    at Object.useFakeTimers (Q:\_kyle\temp_documents\GitHub\business_scraper\node_modules\jest-runtime\build\index.js:1980:38)
    at Object.useFakeTimers (Q:\_kyle\temp_documents\GitHub\business_scraper\src\__tests__\hooks\useCSRFProtection.test.tsx:28:10)
    at Promise.then.completed (Q:\_kyle\temp_documents\GitHub\business_scraper\node_modules\jest-circus\build\utils.js:298:28)
    at new Promise (<anonymous>)
    at callAsyncCircusFn (Q:\_kyle\temp_documents\GitHub\business_scraper\node_modules\jest-circus\build\utils.js:231:10)
    at _callCircusHook (Q:\_kyle\temp_documents\GitHub\business_scraper\node_modules\jest-circus\build\run.js:281:40)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)
    at _runTest (Q:\_kyle\temp_documents\GitHub\business_scraper\node_modules\jest-circus\build\run.js:246:5)
    at _runTestsForDescribeBlock (Q:\_kyle\temp_documents\GitHub\business_scraper\node_modules\jest-circus\build\run.js:126:9)
    at _runTestsForDescribeBlock (Q:\_kyle\temp_documents\GitHub\business_scraper\node_modules\jest-circus\build\run.js:121:9)
    at _runTestsForDescribeBlock (Q:\_kyle\temp_documents\GitHub\business_scraper\node_modules\jest-circus\build\run.js:121:9)
    at run (Q:\_kyle\temp_documents\GitHub\business_scraper\node_modules\jest-circus\build\run.js:71:3)
    at runAndTransformResultsToJestFormat (Q:\_kyle\temp_documents\GitHub\business_scraper\node_modules\jest-circus\build\legacy-code-todo-rewrite\jestAdapterInit.js:122:21)
    at jestAdapter (Q:\_kyle\temp_documents\GitHub\business_scraper\node_modules\jest-circus\build\legacy-code-todo-rewrite\jestAdapter.js:79:19)
    at runTestInternal (Q:\_kyle\temp_documents\GitHub\business_scraper\node_modules\jest-runner\build\runTest.js:367:16)
    at runTest (Q:\_kyle\temp_documents\GitHub\business_scraper\node_modules\jest-runner\build\runTest.js:444:34)
- **should retry with exponential backoff on failures**: TypeError: Can't install fake timers twice on the same global object.
    at Object.install (Q:\_kyle\temp_documents\GitHub\business_scraper\node_modules\@sinonjs\fake-timers\src\fake-timers-src.js:1663:19)
    at FakeTimers.useFakeTimers (Q:\_kyle\temp_documents\GitHub\business_scraper\node_modules\@jest\fake-timers\build\modernFakeTimers.js:118:36)
    at Object.useFakeTimers (Q:\_kyle\temp_documents\GitHub\business_scraper\node_modules\jest-runtime\build\index.js:1980:38)
    at Object.useFakeTimers (Q:\_kyle\temp_documents\GitHub\business_scraper\src\__tests__\hooks\useCSRFProtection.test.tsx:28:10)
    at Promise.then.completed (Q:\_kyle\temp_documents\GitHub\business_scraper\node_modules\jest-circus\build\utils.js:298:28)
    at new Promise (<anonymous>)
    at callAsyncCircusFn (Q:\_kyle\temp_documents\GitHub\business_scraper\node_modules\jest-circus\build\utils.js:231:10)
    at _callCircusHook (Q:\_kyle\temp_documents\GitHub\business_scraper\node_modules\jest-circus\build\run.js:281:40)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)
    at _runTest (Q:\_kyle\temp_documents\GitHub\business_scraper\node_modules\jest-circus\build\run.js:246:5)
    at _runTestsForDescribeBlock (Q:\_kyle\temp_documents\GitHub\business_scraper\node_modules\jest-circus\build\run.js:126:9)
    at _runTestsForDescribeBlock (Q:\_kyle\temp_documents\GitHub\business_scraper\node_modules\jest-circus\build\run.js:121:9)
    at _runTestsForDescribeBlock (Q:\_kyle\temp_documents\GitHub\business_scraper\node_modules\jest-circus\build\run.js:121:9)
    at run (Q:\_kyle\temp_documents\GitHub\business_scraper\node_modules\jest-circus\build\run.js:71:3)
    at runAndTransformResultsToJestFormat (Q:\_kyle\temp_documents\GitHub\business_scraper\node_modules\jest-circus\build\legacy-code-todo-rewrite\jestAdapterInit.js:122:21)
    at jestAdapter (Q:\_kyle\temp_documents\GitHub\business_scraper\node_modules\jest-circus\build\legacy-code-todo-rewrite\jestAdapter.js:79:19)
    at runTestInternal (Q:\_kyle\temp_documents\GitHub\business_scraper\node_modules\jest-runner\build\runTest.js:367:16)
    at runTest (Q:\_kyle\temp_documents\GitHub\business_scraper\node_modules\jest-runner\build\runTest.js:444:34)
- **should set error after max retries exceeded**: TypeError: Can't install fake timers twice on the same global object.
    at Object.install (Q:\_kyle\temp_documents\GitHub\business_scraper\node_modules\@sinonjs\fake-timers\src\fake-timers-src.js:1663:19)
    at FakeTimers.useFakeTimers (Q:\_kyle\temp_documents\GitHub\business_scraper\node_modules\@jest\fake-timers\build\modernFakeTimers.js:118:36)
    at Object.useFakeTimers (Q:\_kyle\temp_documents\GitHub\business_scraper\node_modules\jest-runtime\build\index.js:1980:38)
    at Object.useFakeTimers (Q:\_kyle\temp_documents\GitHub\business_scraper\src\__tests__\hooks\useCSRFProtection.test.tsx:28:10)
    at Promise.then.completed (Q:\_kyle\temp_documents\GitHub\business_scraper\node_modules\jest-circus\build\utils.js:298:28)
    at new Promise (<anonymous>)
    at callAsyncCircusFn (Q:\_kyle\temp_documents\GitHub\business_scraper\node_modules\jest-circus\build\utils.js:231:10)
    at _callCircusHook (Q:\_kyle\temp_documents\GitHub\business_scraper\node_modules\jest-circus\build\run.js:281:40)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)
    at _runTest (Q:\_kyle\temp_documents\GitHub\business_scraper\node_modules\jest-circus\build\run.js:246:5)
    at _runTestsForDescribeBlock (Q:\_kyle\temp_documents\GitHub\business_scraper\node_modules\jest-circus\build\run.js:126:9)
    at _runTestsForDescribeBlock (Q:\_kyle\temp_documents\GitHub\business_scraper\node_modules\jest-circus\build\run.js:121:9)
    at _runTestsForDescribeBlock (Q:\_kyle\temp_documents\GitHub\business_scraper\node_modules\jest-circus\build\run.js:121:9)
    at run (Q:\_kyle\temp_documents\GitHub\business_scraper\node_modules\jest-circus\build\run.js:71:3)
    at runAndTransformResultsToJestFormat (Q:\_kyle\temp_documents\GitHub\business_scraper\node_modules\jest-circus\build\legacy-code-todo-rewrite\jestAdapterInit.js:122:21)
    at jestAdapter (Q:\_kyle\temp_documents\GitHub\business_scraper\node_modules\jest-circus\build\legacy-code-todo-rewrite\jestAdapter.js:79:19)
    at runTestInternal (Q:\_kyle\temp_documents\GitHub\business_scraper\node_modules\jest-runner\build\runTest.js:367:16)
    at runTest (Q:\_kyle\temp_documents\GitHub\business_scraper\node_modules\jest-runner\build\runTest.js:444:34)
- **should validate token expiration correctly**: TypeError: Can't install fake timers twice on the same global object.
    at Object.install (Q:\_kyle\temp_documents\GitHub\business_scraper\node_modules\@sinonjs\fake-timers\src\fake-timers-src.js:1663:19)
    at FakeTimers.useFakeTimers (Q:\_kyle\temp_documents\GitHub\business_scraper\node_modules\@jest\fake-timers\build\modernFakeTimers.js:118:36)
    at Object.useFakeTimers (Q:\_kyle\temp_documents\GitHub\business_scraper\node_modules\jest-runtime\build\index.js:1980:38)
    at Object.useFakeTimers (Q:\_kyle\temp_documents\GitHub\business_scraper\src\__tests__\hooks\useCSRFProtection.test.tsx:28:10)
    at Promise.then.completed (Q:\_kyle\temp_documents\GitHub\business_scraper\node_modules\jest-circus\build\utils.js:298:28)
    at new Promise (<anonymous>)
    at callAsyncCircusFn (Q:\_kyle\temp_documents\GitHub\business_scraper\node_modules\jest-circus\build\utils.js:231:10)
    at _callCircusHook (Q:\_kyle\temp_documents\GitHub\business_scraper\node_modules\jest-circus\build\run.js:281:40)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)
    at _runTest (Q:\_kyle\temp_documents\GitHub\business_scraper\node_modules\jest-circus\build\run.js:246:5)
    at _runTestsForDescribeBlock (Q:\_kyle\temp_documents\GitHub\business_scraper\node_modules\jest-circus\build\run.js:126:9)
    at _runTestsForDescribeBlock (Q:\_kyle\temp_documents\GitHub\business_scraper\node_modules\jest-circus\build\run.js:121:9)
    at _runTestsForDescribeBlock (Q:\_kyle\temp_documents\GitHub\business_scraper\node_modules\jest-circus\build\run.js:121:9)
    at run (Q:\_kyle\temp_documents\GitHub\business_scraper\node_modules\jest-circus\build\run.js:71:3)
    at runAndTransformResultsToJestFormat (Q:\_kyle\temp_documents\GitHub\business_scraper\node_modules\jest-circus\build\legacy-code-todo-rewrite\jestAdapterInit.js:122:21)
    at jestAdapter (Q:\_kyle\temp_documents\GitHub\business_scraper\node_modules\jest-circus\build\legacy-code-todo-rewrite\jestAdapter.js:79:19)
    at runTestInternal (Q:\_kyle\temp_documents\GitHub\business_scraper\node_modules\jest-runner\build\runTest.js:367:16)
    at runTest (Q:\_kyle\temp_documents\GitHub\business_scraper\node_modules\jest-runner\build\runTest.js:444:34)
- **should detect expired tokens**: TypeError: Can't install fake timers twice on the same global object.
    at Object.install (Q:\_kyle\temp_documents\GitHub\business_scraper\node_modules\@sinonjs\fake-timers\src\fake-timers-src.js:1663:19)
    at FakeTimers.useFakeTimers (Q:\_kyle\temp_documents\GitHub\business_scraper\node_modules\@jest\fake-timers\build\modernFakeTimers.js:118:36)
    at Object.useFakeTimers (Q:\_kyle\temp_documents\GitHub\business_scraper\node_modules\jest-runtime\build\index.js:1980:38)
    at Object.useFakeTimers (Q:\_kyle\temp_documents\GitHub\business_scraper\src\__tests__\hooks\useCSRFProtection.test.tsx:28:10)
    at Promise.then.completed (Q:\_kyle\temp_documents\GitHub\business_scraper\node_modules\jest-circus\build\utils.js:298:28)
    at new Promise (<anonymous>)
    at callAsyncCircusFn (Q:\_kyle\temp_documents\GitHub\business_scraper\node_modules\jest-circus\build\utils.js:231:10)
    at _callCircusHook (Q:\_kyle\temp_documents\GitHub\business_scraper\node_modules\jest-circus\build\run.js:281:40)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)
    at _runTest (Q:\_kyle\temp_documents\GitHub\business_scraper\node_modules\jest-circus\build\run.js:246:5)
    at _runTestsForDescribeBlock (Q:\_kyle\temp_documents\GitHub\business_scraper\node_modules\jest-circus\build\run.js:126:9)
    at _runTestsForDescribeBlock (Q:\_kyle\temp_documents\GitHub\business_scraper\node_modules\jest-circus\build\run.js:121:9)
    at _runTestsForDescribeBlock (Q:\_kyle\temp_documents\GitHub\business_scraper\node_modules\jest-circus\build\run.js:121:9)
    at run (Q:\_kyle\temp_documents\GitHub\business_scraper\node_modules\jest-circus\build\run.js:71:3)
    at runAndTransformResultsToJestFormat (Q:\_kyle\temp_documents\GitHub\business_scraper\node_modules\jest-circus\build\legacy-code-todo-rewrite\jestAdapterInit.js:122:21)
    at jestAdapter (Q:\_kyle\temp_documents\GitHub\business_scraper\node_modules\jest-circus\build\legacy-code-todo-rewrite\jestAdapter.js:79:19)
    at runTestInternal (Q:\_kyle\temp_documents\GitHub\business_scraper\node_modules\jest-runner\build\runTest.js:367:16)
    at runTest (Q:\_kyle\temp_documents\GitHub\business_scraper\node_modules\jest-runner\build\runTest.js:444:34)
- **should include CSRF token in headers**: TypeError: Can't install fake timers twice on the same global object.
    at Object.install (Q:\_kyle\temp_documents\GitHub\business_scraper\node_modules\@sinonjs\fake-timers\src\fake-timers-src.js:1663:19)
    at FakeTimers.useFakeTimers (Q:\_kyle\temp_documents\GitHub\business_scraper\node_modules\@jest\fake-timers\build\modernFakeTimers.js:118:36)
    at Object.useFakeTimers (Q:\_kyle\temp_documents\GitHub\business_scraper\node_modules\jest-runtime\build\index.js:1980:38)
    at Object.useFakeTimers (Q:\_kyle\temp_documents\GitHub\business_scraper\src\__tests__\hooks\useCSRFProtection.test.tsx:28:10)
    at Promise.then.completed (Q:\_kyle\temp_documents\GitHub\business_scraper\node_modules\jest-circus\build\utils.js:298:28)
    at new Promise (<anonymous>)
    at callAsyncCircusFn (Q:\_kyle\temp_documents\GitHub\business_scraper\node_modules\jest-circus\build\utils.js:231:10)
    at _callCircusHook (Q:\_kyle\temp_documents\GitHub\business_scraper\node_modules\jest-circus\build\run.js:281:40)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)
    at _runTest (Q:\_kyle\temp_documents\GitHub\business_scraper\node_modules\jest-circus\build\run.js:246:5)
    at _runTestsForDescribeBlock (Q:\_kyle\temp_documents\GitHub\business_scraper\node_modules\jest-circus\build\run.js:126:9)
    at _runTestsForDescribeBlock (Q:\_kyle\temp_documents\GitHub\business_scraper\node_modules\jest-circus\build\run.js:121:9)
    at _runTestsForDescribeBlock (Q:\_kyle\temp_documents\GitHub\business_scraper\node_modules\jest-circus\build\run.js:121:9)
    at run (Q:\_kyle\temp_documents\GitHub\business_scraper\node_modules\jest-circus\build\run.js:71:3)
    at runAndTransformResultsToJestFormat (Q:\_kyle\temp_documents\GitHub\business_scraper\node_modules\jest-circus\build\legacy-code-todo-rewrite\jestAdapterInit.js:122:21)
    at jestAdapter (Q:\_kyle\temp_documents\GitHub\business_scraper\node_modules\jest-circus\build\legacy-code-todo-rewrite\jestAdapter.js:79:19)
    at runTestInternal (Q:\_kyle\temp_documents\GitHub\business_scraper\node_modules\jest-runner\build\runTest.js:367:16)
    at runTest (Q:\_kyle\temp_documents\GitHub\business_scraper\node_modules\jest-runner\build\runTest.js:444:34)
- **should include token ID for temporary tokens**: TypeError: Can't install fake timers twice on the same global object.
    at Object.install (Q:\_kyle\temp_documents\GitHub\business_scraper\node_modules\@sinonjs\fake-timers\src\fake-timers-src.js:1663:19)
    at FakeTimers.useFakeTimers (Q:\_kyle\temp_documents\GitHub\business_scraper\node_modules\@jest\fake-timers\build\modernFakeTimers.js:118:36)
    at Object.useFakeTimers (Q:\_kyle\temp_documents\GitHub\business_scraper\node_modules\jest-runtime\build\index.js:1980:38)
    at Object.useFakeTimers (Q:\_kyle\temp_documents\GitHub\business_scraper\src\__tests__\hooks\useCSRFProtection.test.tsx:28:10)
    at Promise.then.completed (Q:\_kyle\temp_documents\GitHub\business_scraper\node_modules\jest-circus\build\utils.js:298:28)
    at new Promise (<anonymous>)
    at callAsyncCircusFn (Q:\_kyle\temp_documents\GitHub\business_scraper\node_modules\jest-circus\build\utils.js:231:10)
    at _callCircusHook (Q:\_kyle\temp_documents\GitHub\business_scraper\node_modules\jest-circus\build\run.js:281:40)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)
    at _runTest (Q:\_kyle\temp_documents\GitHub\business_scraper\node_modules\jest-circus\build\run.js:246:5)
    at _runTestsForDescribeBlock (Q:\_kyle\temp_documents\GitHub\business_scraper\node_modules\jest-circus\build\run.js:126:9)
    at _runTestsForDescribeBlock (Q:\_kyle\temp_documents\GitHub\business_scraper\node_modules\jest-circus\build\run.js:121:9)
    at _runTestsForDescribeBlock (Q:\_kyle\temp_documents\GitHub\business_scraper\node_modules\jest-circus\build\run.js:121:9)
    at run (Q:\_kyle\temp_documents\GitHub\business_scraper\node_modules\jest-circus\build\run.js:71:3)
    at runAndTransformResultsToJestFormat (Q:\_kyle\temp_documents\GitHub\business_scraper\node_modules\jest-circus\build\legacy-code-todo-rewrite\jestAdapterInit.js:122:21)
    at jestAdapter (Q:\_kyle\temp_documents\GitHub\business_scraper\node_modules\jest-circus\build\legacy-code-todo-rewrite\jestAdapter.js:79:19)
    at runTestInternal (Q:\_kyle\temp_documents\GitHub\business_scraper\node_modules\jest-runner\build\runTest.js:367:16)
    at runTest (Q:\_kyle\temp_documents\GitHub\business_scraper\node_modules\jest-runner\build\runTest.js:444:34)
- **should submit form with CSRF protection**: TypeError: Can't install fake timers twice on the same global object.
    at Object.install (Q:\_kyle\temp_documents\GitHub\business_scraper\node_modules\@sinonjs\fake-timers\src\fake-timers-src.js:1663:19)
    at FakeTimers.useFakeTimers (Q:\_kyle\temp_documents\GitHub\business_scraper\node_modules\@jest\fake-timers\build\modernFakeTimers.js:118:36)
    at Object.useFakeTimers (Q:\_kyle\temp_documents\GitHub\business_scraper\node_modules\jest-runtime\build\index.js:1980:38)
    at Object.useFakeTimers (Q:\_kyle\temp_documents\GitHub\business_scraper\src\__tests__\hooks\useCSRFProtection.test.tsx:212:10)
    at Promise.then.completed (Q:\_kyle\temp_documents\GitHub\business_scraper\node_modules\jest-circus\build\utils.js:298:28)
    at new Promise (<anonymous>)
    at callAsyncCircusFn (Q:\_kyle\temp_documents\GitHub\business_scraper\node_modules\jest-circus\build\utils.js:231:10)
    at _callCircusHook (Q:\_kyle\temp_documents\GitHub\business_scraper\node_modules\jest-circus\build\run.js:281:40)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)
    at _runTest (Q:\_kyle\temp_documents\GitHub\business_scraper\node_modules\jest-circus\build\run.js:246:5)
    at _runTestsForDescribeBlock (Q:\_kyle\temp_documents\GitHub\business_scraper\node_modules\jest-circus\build\run.js:126:9)
    at _runTestsForDescribeBlock (Q:\_kyle\temp_documents\GitHub\business_scraper\node_modules\jest-circus\build\run.js:121:9)
    at run (Q:\_kyle\temp_documents\GitHub\business_scraper\node_modules\jest-circus\build\run.js:71:3)
    at runAndTransformResultsToJestFormat (Q:\_kyle\temp_documents\GitHub\business_scraper\node_modules\jest-circus\build\legacy-code-todo-rewrite\jestAdapterInit.js:122:21)
    at jestAdapter (Q:\_kyle\temp_documents\GitHub\business_scraper\node_modules\jest-circus\build\legacy-code-todo-rewrite\jestAdapter.js:79:19)
    at runTestInternal (Q:\_kyle\temp_documents\GitHub\business_scraper\node_modules\jest-runner\build\runTest.js:367:16)
    at runTest (Q:\_kyle\temp_documents\GitHub\business_scraper\node_modules\jest-runner\build\runTest.js:444:34)

## Performance Analysis
- **Average Duration**: 10224.00ms
- **Memory Peak**: 104.58MB

## Recommendations
### Fix Critical Test Failures (CRITICAL)
9 critical test failures require immediate attention
- Fix should fetch token from /api/csrf first: TypeError: Cannot assign to read only property 'performance' of object '[object Window]'
    at hijackMethod (Q:\_kyle\temp_documents\GitHub\business_scraper\node_modules\@sinonjs\fake-timers\src\fake-timers-src.js:945:32)
    at Object.install (Q:\_kyle\temp_documents\GitHub\business_scraper\node_modules\@sinonjs\fake-timers\src\fake-timers-src.js:1754:17)
    at FakeTimers.useFakeTimers (Q:\_kyle\temp_documents\GitHub\business_scraper\node_modules\@jest\fake-timers\build\modernFakeTimers.js:118:36)
    at Object.useFakeTimers (Q:\_kyle\temp_documents\GitHub\business_scraper\node_modules\jest-runtime\build\index.js:1980:38)
    at Object.useFakeTimers (Q:\_kyle\temp_documents\GitHub\business_scraper\src\__tests__\hooks\useCSRFProtection.test.tsx:28:10)
    at Promise.then.completed (Q:\_kyle\temp_documents\GitHub\business_scraper\node_modules\jest-circus\build\utils.js:298:28)
    at new Promise (<anonymous>)
    at callAsyncCircusFn (Q:\_kyle\temp_documents\GitHub\business_scraper\node_modules\jest-circus\build\utils.js:231:10)
    at _callCircusHook (Q:\_kyle\temp_documents\GitHub\business_scraper\node_modules\jest-circus\build\run.js:281:40)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)
    at _runTest (Q:\_kyle\temp_documents\GitHub\business_scraper\node_modules\jest-circus\build\run.js:246:5)
    at _runTestsForDescribeBlock (Q:\_kyle\temp_documents\GitHub\business_scraper\node_modules\jest-circus\build\run.js:126:9)
    at _runTestsForDescribeBlock (Q:\_kyle\temp_documents\GitHub\business_scraper\node_modules\jest-circus\build\run.js:121:9)
    at _runTestsForDescribeBlock (Q:\_kyle\temp_documents\GitHub\business_scraper\node_modules\jest-circus\build\run.js:121:9)
    at run (Q:\_kyle\temp_documents\GitHub\business_scraper\node_modules\jest-circus\build\run.js:71:3)
    at runAndTransformResultsToJestFormat (Q:\_kyle\temp_documents\GitHub\business_scraper\node_modules\jest-circus\build\legacy-code-todo-rewrite\jestAdapterInit.js:122:21)
    at jestAdapter (Q:\_kyle\temp_documents\GitHub\business_scraper\node_modules\jest-circus\build\legacy-code-todo-rewrite\jestAdapter.js:79:19)
    at runTestInternal (Q:\_kyle\temp_documents\GitHub\business_scraper\node_modules\jest-runner\build\runTest.js:367:16)
    at runTest (Q:\_kyle\temp_documents\GitHub\business_scraper\node_modules\jest-runner\build\runTest.js:444:34)
- Fix should fallback to /api/auth when /api/csrf fails: TypeError: Can't install fake timers twice on the same global object.
    at Object.install (Q:\_kyle\temp_documents\GitHub\business_scraper\node_modules\@sinonjs\fake-timers\src\fake-timers-src.js:1663:19)
    at FakeTimers.useFakeTimers (Q:\_kyle\temp_documents\GitHub\business_scraper\node_modules\@jest\fake-timers\build\modernFakeTimers.js:118:36)
    at Object.useFakeTimers (Q:\_kyle\temp_documents\GitHub\business_scraper\node_modules\jest-runtime\build\index.js:1980:38)
    at Object.useFakeTimers (Q:\_kyle\temp_documents\GitHub\business_scraper\src\__tests__\hooks\useCSRFProtection.test.tsx:28:10)
    at Promise.then.completed (Q:\_kyle\temp_documents\GitHub\business_scraper\node_modules\jest-circus\build\utils.js:298:28)
    at new Promise (<anonymous>)
    at callAsyncCircusFn (Q:\_kyle\temp_documents\GitHub\business_scraper\node_modules\jest-circus\build\utils.js:231:10)
    at _callCircusHook (Q:\_kyle\temp_documents\GitHub\business_scraper\node_modules\jest-circus\build\run.js:281:40)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)
    at _runTest (Q:\_kyle\temp_documents\GitHub\business_scraper\node_modules\jest-circus\build\run.js:246:5)
    at _runTestsForDescribeBlock (Q:\_kyle\temp_documents\GitHub\business_scraper\node_modules\jest-circus\build\run.js:126:9)
    at _runTestsForDescribeBlock (Q:\_kyle\temp_documents\GitHub\business_scraper\node_modules\jest-circus\build\run.js:121:9)
    at _runTestsForDescribeBlock (Q:\_kyle\temp_documents\GitHub\business_scraper\node_modules\jest-circus\build\run.js:121:9)
    at run (Q:\_kyle\temp_documents\GitHub\business_scraper\node_modules\jest-circus\build\run.js:71:3)
    at runAndTransformResultsToJestFormat (Q:\_kyle\temp_documents\GitHub\business_scraper\node_modules\jest-circus\build\legacy-code-todo-rewrite\jestAdapterInit.js:122:21)
    at jestAdapter (Q:\_kyle\temp_documents\GitHub\business_scraper\node_modules\jest-circus\build\legacy-code-todo-rewrite\jestAdapter.js:79:19)
    at runTestInternal (Q:\_kyle\temp_documents\GitHub\business_scraper\node_modules\jest-runner\build\runTest.js:367:16)
    at runTest (Q:\_kyle\temp_documents\GitHub\business_scraper\node_modules\jest-runner\build\runTest.js:444:34)
- Fix should retry with exponential backoff on failures: TypeError: Can't install fake timers twice on the same global object.
    at Object.install (Q:\_kyle\temp_documents\GitHub\business_scraper\node_modules\@sinonjs\fake-timers\src\fake-timers-src.js:1663:19)
    at FakeTimers.useFakeTimers (Q:\_kyle\temp_documents\GitHub\business_scraper\node_modules\@jest\fake-timers\build\modernFakeTimers.js:118:36)
    at Object.useFakeTimers (Q:\_kyle\temp_documents\GitHub\business_scraper\node_modules\jest-runtime\build\index.js:1980:38)
    at Object.useFakeTimers (Q:\_kyle\temp_documents\GitHub\business_scraper\src\__tests__\hooks\useCSRFProtection.test.tsx:28:10)
    at Promise.then.completed (Q:\_kyle\temp_documents\GitHub\business_scraper\node_modules\jest-circus\build\utils.js:298:28)
    at new Promise (<anonymous>)
    at callAsyncCircusFn (Q:\_kyle\temp_documents\GitHub\business_scraper\node_modules\jest-circus\build\utils.js:231:10)
    at _callCircusHook (Q:\_kyle\temp_documents\GitHub\business_scraper\node_modules\jest-circus\build\run.js:281:40)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)
    at _runTest (Q:\_kyle\temp_documents\GitHub\business_scraper\node_modules\jest-circus\build\run.js:246:5)
    at _runTestsForDescribeBlock (Q:\_kyle\temp_documents\GitHub\business_scraper\node_modules\jest-circus\build\run.js:126:9)
    at _runTestsForDescribeBlock (Q:\_kyle\temp_documents\GitHub\business_scraper\node_modules\jest-circus\build\run.js:121:9)
    at _runTestsForDescribeBlock (Q:\_kyle\temp_documents\GitHub\business_scraper\node_modules\jest-circus\build\run.js:121:9)
    at run (Q:\_kyle\temp_documents\GitHub\business_scraper\node_modules\jest-circus\build\run.js:71:3)
    at runAndTransformResultsToJestFormat (Q:\_kyle\temp_documents\GitHub\business_scraper\node_modules\jest-circus\build\legacy-code-todo-rewrite\jestAdapterInit.js:122:21)
    at jestAdapter (Q:\_kyle\temp_documents\GitHub\business_scraper\node_modules\jest-circus\build\legacy-code-todo-rewrite\jestAdapter.js:79:19)
    at runTestInternal (Q:\_kyle\temp_documents\GitHub\business_scraper\node_modules\jest-runner\build\runTest.js:367:16)
    at runTest (Q:\_kyle\temp_documents\GitHub\business_scraper\node_modules\jest-runner\build\runTest.js:444:34)
- Fix should set error after max retries exceeded: TypeError: Can't install fake timers twice on the same global object.
    at Object.install (Q:\_kyle\temp_documents\GitHub\business_scraper\node_modules\@sinonjs\fake-timers\src\fake-timers-src.js:1663:19)
    at FakeTimers.useFakeTimers (Q:\_kyle\temp_documents\GitHub\business_scraper\node_modules\@jest\fake-timers\build\modernFakeTimers.js:118:36)
    at Object.useFakeTimers (Q:\_kyle\temp_documents\GitHub\business_scraper\node_modules\jest-runtime\build\index.js:1980:38)
    at Object.useFakeTimers (Q:\_kyle\temp_documents\GitHub\business_scraper\src\__tests__\hooks\useCSRFProtection.test.tsx:28:10)
    at Promise.then.completed (Q:\_kyle\temp_documents\GitHub\business_scraper\node_modules\jest-circus\build\utils.js:298:28)
    at new Promise (<anonymous>)
    at callAsyncCircusFn (Q:\_kyle\temp_documents\GitHub\business_scraper\node_modules\jest-circus\build\utils.js:231:10)
    at _callCircusHook (Q:\_kyle\temp_documents\GitHub\business_scraper\node_modules\jest-circus\build\run.js:281:40)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)
    at _runTest (Q:\_kyle\temp_documents\GitHub\business_scraper\node_modules\jest-circus\build\run.js:246:5)
    at _runTestsForDescribeBlock (Q:\_kyle\temp_documents\GitHub\business_scraper\node_modules\jest-circus\build\run.js:126:9)
    at _runTestsForDescribeBlock (Q:\_kyle\temp_documents\GitHub\business_scraper\node_modules\jest-circus\build\run.js:121:9)
    at _runTestsForDescribeBlock (Q:\_kyle\temp_documents\GitHub\business_scraper\node_modules\jest-circus\build\run.js:121:9)
    at run (Q:\_kyle\temp_documents\GitHub\business_scraper\node_modules\jest-circus\build\run.js:71:3)
    at runAndTransformResultsToJestFormat (Q:\_kyle\temp_documents\GitHub\business_scraper\node_modules\jest-circus\build\legacy-code-todo-rewrite\jestAdapterInit.js:122:21)
    at jestAdapter (Q:\_kyle\temp_documents\GitHub\business_scraper\node_modules\jest-circus\build\legacy-code-todo-rewrite\jestAdapter.js:79:19)
    at runTestInternal (Q:\_kyle\temp_documents\GitHub\business_scraper\node_modules\jest-runner\build\runTest.js:367:16)
    at runTest (Q:\_kyle\temp_documents\GitHub\business_scraper\node_modules\jest-runner\build\runTest.js:444:34)
- Fix should validate token expiration correctly: TypeError: Can't install fake timers twice on the same global object.
    at Object.install (Q:\_kyle\temp_documents\GitHub\business_scraper\node_modules\@sinonjs\fake-timers\src\fake-timers-src.js:1663:19)
    at FakeTimers.useFakeTimers (Q:\_kyle\temp_documents\GitHub\business_scraper\node_modules\@jest\fake-timers\build\modernFakeTimers.js:118:36)
    at Object.useFakeTimers (Q:\_kyle\temp_documents\GitHub\business_scraper\node_modules\jest-runtime\build\index.js:1980:38)
    at Object.useFakeTimers (Q:\_kyle\temp_documents\GitHub\business_scraper\src\__tests__\hooks\useCSRFProtection.test.tsx:28:10)
    at Promise.then.completed (Q:\_kyle\temp_documents\GitHub\business_scraper\node_modules\jest-circus\build\utils.js:298:28)
    at new Promise (<anonymous>)
    at callAsyncCircusFn (Q:\_kyle\temp_documents\GitHub\business_scraper\node_modules\jest-circus\build\utils.js:231:10)
    at _callCircusHook (Q:\_kyle\temp_documents\GitHub\business_scraper\node_modules\jest-circus\build\run.js:281:40)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)
    at _runTest (Q:\_kyle\temp_documents\GitHub\business_scraper\node_modules\jest-circus\build\run.js:246:5)
    at _runTestsForDescribeBlock (Q:\_kyle\temp_documents\GitHub\business_scraper\node_modules\jest-circus\build\run.js:126:9)
    at _runTestsForDescribeBlock (Q:\_kyle\temp_documents\GitHub\business_scraper\node_modules\jest-circus\build\run.js:121:9)
    at _runTestsForDescribeBlock (Q:\_kyle\temp_documents\GitHub\business_scraper\node_modules\jest-circus\build\run.js:121:9)
    at run (Q:\_kyle\temp_documents\GitHub\business_scraper\node_modules\jest-circus\build\run.js:71:3)
    at runAndTransformResultsToJestFormat (Q:\_kyle\temp_documents\GitHub\business_scraper\node_modules\jest-circus\build\legacy-code-todo-rewrite\jestAdapterInit.js:122:21)
    at jestAdapter (Q:\_kyle\temp_documents\GitHub\business_scraper\node_modules\jest-circus\build\legacy-code-todo-rewrite\jestAdapter.js:79:19)
    at runTestInternal (Q:\_kyle\temp_documents\GitHub\business_scraper\node_modules\jest-runner\build\runTest.js:367:16)
    at runTest (Q:\_kyle\temp_documents\GitHub\business_scraper\node_modules\jest-runner\build\runTest.js:444:34)
- Fix should detect expired tokens: TypeError: Can't install fake timers twice on the same global object.
    at Object.install (Q:\_kyle\temp_documents\GitHub\business_scraper\node_modules\@sinonjs\fake-timers\src\fake-timers-src.js:1663:19)
    at FakeTimers.useFakeTimers (Q:\_kyle\temp_documents\GitHub\business_scraper\node_modules\@jest\fake-timers\build\modernFakeTimers.js:118:36)
    at Object.useFakeTimers (Q:\_kyle\temp_documents\GitHub\business_scraper\node_modules\jest-runtime\build\index.js:1980:38)
    at Object.useFakeTimers (Q:\_kyle\temp_documents\GitHub\business_scraper\src\__tests__\hooks\useCSRFProtection.test.tsx:28:10)
    at Promise.then.completed (Q:\_kyle\temp_documents\GitHub\business_scraper\node_modules\jest-circus\build\utils.js:298:28)
    at new Promise (<anonymous>)
    at callAsyncCircusFn (Q:\_kyle\temp_documents\GitHub\business_scraper\node_modules\jest-circus\build\utils.js:231:10)
    at _callCircusHook (Q:\_kyle\temp_documents\GitHub\business_scraper\node_modules\jest-circus\build\run.js:281:40)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)
    at _runTest (Q:\_kyle\temp_documents\GitHub\business_scraper\node_modules\jest-circus\build\run.js:246:5)
    at _runTestsForDescribeBlock (Q:\_kyle\temp_documents\GitHub\business_scraper\node_modules\jest-circus\build\run.js:126:9)
    at _runTestsForDescribeBlock (Q:\_kyle\temp_documents\GitHub\business_scraper\node_modules\jest-circus\build\run.js:121:9)
    at _runTestsForDescribeBlock (Q:\_kyle\temp_documents\GitHub\business_scraper\node_modules\jest-circus\build\run.js:121:9)
    at run (Q:\_kyle\temp_documents\GitHub\business_scraper\node_modules\jest-circus\build\run.js:71:3)
    at runAndTransformResultsToJestFormat (Q:\_kyle\temp_documents\GitHub\business_scraper\node_modules\jest-circus\build\legacy-code-todo-rewrite\jestAdapterInit.js:122:21)
    at jestAdapter (Q:\_kyle\temp_documents\GitHub\business_scraper\node_modules\jest-circus\build\legacy-code-todo-rewrite\jestAdapter.js:79:19)
    at runTestInternal (Q:\_kyle\temp_documents\GitHub\business_scraper\node_modules\jest-runner\build\runTest.js:367:16)
    at runTest (Q:\_kyle\temp_documents\GitHub\business_scraper\node_modules\jest-runner\build\runTest.js:444:34)
- Fix should include CSRF token in headers: TypeError: Can't install fake timers twice on the same global object.
    at Object.install (Q:\_kyle\temp_documents\GitHub\business_scraper\node_modules\@sinonjs\fake-timers\src\fake-timers-src.js:1663:19)
    at FakeTimers.useFakeTimers (Q:\_kyle\temp_documents\GitHub\business_scraper\node_modules\@jest\fake-timers\build\modernFakeTimers.js:118:36)
    at Object.useFakeTimers (Q:\_kyle\temp_documents\GitHub\business_scraper\node_modules\jest-runtime\build\index.js:1980:38)
    at Object.useFakeTimers (Q:\_kyle\temp_documents\GitHub\business_scraper\src\__tests__\hooks\useCSRFProtection.test.tsx:28:10)
    at Promise.then.completed (Q:\_kyle\temp_documents\GitHub\business_scraper\node_modules\jest-circus\build\utils.js:298:28)
    at new Promise (<anonymous>)
    at callAsyncCircusFn (Q:\_kyle\temp_documents\GitHub\business_scraper\node_modules\jest-circus\build\utils.js:231:10)
    at _callCircusHook (Q:\_kyle\temp_documents\GitHub\business_scraper\node_modules\jest-circus\build\run.js:281:40)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)
    at _runTest (Q:\_kyle\temp_documents\GitHub\business_scraper\node_modules\jest-circus\build\run.js:246:5)
    at _runTestsForDescribeBlock (Q:\_kyle\temp_documents\GitHub\business_scraper\node_modules\jest-circus\build\run.js:126:9)
    at _runTestsForDescribeBlock (Q:\_kyle\temp_documents\GitHub\business_scraper\node_modules\jest-circus\build\run.js:121:9)
    at _runTestsForDescribeBlock (Q:\_kyle\temp_documents\GitHub\business_scraper\node_modules\jest-circus\build\run.js:121:9)
    at run (Q:\_kyle\temp_documents\GitHub\business_scraper\node_modules\jest-circus\build\run.js:71:3)
    at runAndTransformResultsToJestFormat (Q:\_kyle\temp_documents\GitHub\business_scraper\node_modules\jest-circus\build\legacy-code-todo-rewrite\jestAdapterInit.js:122:21)
    at jestAdapter (Q:\_kyle\temp_documents\GitHub\business_scraper\node_modules\jest-circus\build\legacy-code-todo-rewrite\jestAdapter.js:79:19)
    at runTestInternal (Q:\_kyle\temp_documents\GitHub\business_scraper\node_modules\jest-runner\build\runTest.js:367:16)
    at runTest (Q:\_kyle\temp_documents\GitHub\business_scraper\node_modules\jest-runner\build\runTest.js:444:34)
- Fix should include token ID for temporary tokens: TypeError: Can't install fake timers twice on the same global object.
    at Object.install (Q:\_kyle\temp_documents\GitHub\business_scraper\node_modules\@sinonjs\fake-timers\src\fake-timers-src.js:1663:19)
    at FakeTimers.useFakeTimers (Q:\_kyle\temp_documents\GitHub\business_scraper\node_modules\@jest\fake-timers\build\modernFakeTimers.js:118:36)
    at Object.useFakeTimers (Q:\_kyle\temp_documents\GitHub\business_scraper\node_modules\jest-runtime\build\index.js:1980:38)
    at Object.useFakeTimers (Q:\_kyle\temp_documents\GitHub\business_scraper\src\__tests__\hooks\useCSRFProtection.test.tsx:28:10)
    at Promise.then.completed (Q:\_kyle\temp_documents\GitHub\business_scraper\node_modules\jest-circus\build\utils.js:298:28)
    at new Promise (<anonymous>)
    at callAsyncCircusFn (Q:\_kyle\temp_documents\GitHub\business_scraper\node_modules\jest-circus\build\utils.js:231:10)
    at _callCircusHook (Q:\_kyle\temp_documents\GitHub\business_scraper\node_modules\jest-circus\build\run.js:281:40)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)
    at _runTest (Q:\_kyle\temp_documents\GitHub\business_scraper\node_modules\jest-circus\build\run.js:246:5)
    at _runTestsForDescribeBlock (Q:\_kyle\temp_documents\GitHub\business_scraper\node_modules\jest-circus\build\run.js:126:9)
    at _runTestsForDescribeBlock (Q:\_kyle\temp_documents\GitHub\business_scraper\node_modules\jest-circus\build\run.js:121:9)
    at _runTestsForDescribeBlock (Q:\_kyle\temp_documents\GitHub\business_scraper\node_modules\jest-circus\build\run.js:121:9)
    at run (Q:\_kyle\temp_documents\GitHub\business_scraper\node_modules\jest-circus\build\run.js:71:3)
    at runAndTransformResultsToJestFormat (Q:\_kyle\temp_documents\GitHub\business_scraper\node_modules\jest-circus\build\legacy-code-todo-rewrite\jestAdapterInit.js:122:21)
    at jestAdapter (Q:\_kyle\temp_documents\GitHub\business_scraper\node_modules\jest-circus\build\legacy-code-todo-rewrite\jestAdapter.js:79:19)
    at runTestInternal (Q:\_kyle\temp_documents\GitHub\business_scraper\node_modules\jest-runner\build\runTest.js:367:16)
    at runTest (Q:\_kyle\temp_documents\GitHub\business_scraper\node_modules\jest-runner\build\runTest.js:444:34)
- Fix should submit form with CSRF protection: TypeError: Can't install fake timers twice on the same global object.
    at Object.install (Q:\_kyle\temp_documents\GitHub\business_scraper\node_modules\@sinonjs\fake-timers\src\fake-timers-src.js:1663:19)
    at FakeTimers.useFakeTimers (Q:\_kyle\temp_documents\GitHub\business_scraper\node_modules\@jest\fake-timers\build\modernFakeTimers.js:118:36)
    at Object.useFakeTimers (Q:\_kyle\temp_documents\GitHub\business_scraper\node_modules\jest-runtime\build\index.js:1980:38)
    at Object.useFakeTimers (Q:\_kyle\temp_documents\GitHub\business_scraper\src\__tests__\hooks\useCSRFProtection.test.tsx:212:10)
    at Promise.then.completed (Q:\_kyle\temp_documents\GitHub\business_scraper\node_modules\jest-circus\build\utils.js:298:28)
    at new Promise (<anonymous>)
    at callAsyncCircusFn (Q:\_kyle\temp_documents\GitHub\business_scraper\node_modules\jest-circus\build\utils.js:231:10)
    at _callCircusHook (Q:\_kyle\temp_documents\GitHub\business_scraper\node_modules\jest-circus\build\run.js:281:40)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)
    at _runTest (Q:\_kyle\temp_documents\GitHub\business_scraper\node_modules\jest-circus\build\run.js:246:5)
    at _runTestsForDescribeBlock (Q:\_kyle\temp_documents\GitHub\business_scraper\node_modules\jest-circus\build\run.js:126:9)
    at _runTestsForDescribeBlock (Q:\_kyle\temp_documents\GitHub\business_scraper\node_modules\jest-circus\build\run.js:121:9)
    at run (Q:\_kyle\temp_documents\GitHub\business_scraper\node_modules\jest-circus\build\run.js:71:3)
    at runAndTransformResultsToJestFormat (Q:\_kyle\temp_documents\GitHub\business_scraper\node_modules\jest-circus\build\legacy-code-todo-rewrite\jestAdapterInit.js:122:21)
    at jestAdapter (Q:\_kyle\temp_documents\GitHub\business_scraper\node_modules\jest-circus\build\legacy-code-todo-rewrite\jestAdapter.js:79:19)
    at runTestInternal (Q:\_kyle\temp_documents\GitHub\business_scraper\node_modules\jest-runner\build\runTest.js:367:16)
    at runTest (Q:\_kyle\temp_documents\GitHub\business_scraper\node_modules\jest-runner\build\runTest.js:444:34)

---
*Generated at 2025-09-30T13:40:27.961Z by EnhancedTestLogger*